<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Rank Swapping — rankSwap • sdcMicro</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Rank Swapping — rankSwap" />

<meta property="og:description" content="Swapping values within a range so that, first, the correlation structure of
original variables are preserved, and second, the values in each record are
disturbed.  To be used on numeric or ordinal variables where the rank can be
determined and the correlation coefficient makes sense." />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">sdcMicro</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sdcMicro.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sdcTools/sdcMicro">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rank Swapping</h1>
    <small>Source: <a href='https:/github.com/sdcTools/sdcMicro/blob/master/R/rankSwap.R'><code>R/rankSwap.R</code></a></small>
    </div>

    
    <p>Swapping values within a range so that, first, the correlation structure of
original variables are preserved, and second, the values in each record are
disturbed.  To be used on numeric or ordinal variables where the rank can be
determined and the correlation coefficient makes sense.</p>
    

    <pre class="usage"><span class='fu'>rankSwap</span>(<span class='no'>obj</span>, <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>TopPercent</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>BottomPercent</span> <span class='kw'>=</span> <span class='fl'>5</span>,
  <span class='kw'>K0</span> <span class='kw'>=</span> -<span class='fl'>1</span>, <span class='kw'>R0</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>P</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>missing</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj</th>
      <td><p>a <code>sdcMicroObj-class</code>-object or a <code>data.frame</code></p></td>
    </tr>
    <tr>
      <th>variables</th>
      <td><p>names or index of variables for that rank swapping is
applied.  For an object of class <code>sdcMicroObj-class</code>, all numeric key variables are
selected if variables=NULL.</p></td>
    </tr>
    <tr>
      <th>TopPercent</th>
      <td><p>Percentage of largest values that are grouped together
before rank swapping is applied.</p></td>
    </tr>
    <tr>
      <th>BottomPercent</th>
      <td><p>Percentage of lowest values that are grouped together
before rank swapping is applied.</p></td>
    </tr>
    <tr>
      <th>K0</th>
      <td><p>Subset-mean preservation factor. Preserves the means before and
after rank swapping within a range based on K0.  K0 is the subset-mean
preservation factor such that \(| X_1 -X_2 | \leq \frac{2 K_0
X_1}{\sqrt(N_S)}\), where \(X_1\)
and \(X_2\) are the subset means of the field before and after
swapping, and \(N_S\) is the sample size of the subset.</p></td>
    </tr>
    <tr>
      <th>R0</th>
      <td><p>Multivariate preservation factor. Preserves the correlation
between variables within a certain range based on the given constant R0.  We
can specify the preservation factor as \(R_0=\frac{R_1}{R_2}\) where \(R_1\) is the correlation coefficient of the two
fields after swapping, and \(R_2\) is the correlation coefficient of
the two fields before swapping.</p></td>
    </tr>
    <tr>
      <th>P</th>
      <td><p>Rank range as percentage of total sample size. We can specify the
rank range itself directly, noted as \(P\), which is the percentage of
the records. So two records are eligible for swapping if their ranks,
\(i\) and \(j\) respectively, satisfy \(| i-j | \le \frac{P
N}{100}\), where \(N\) is the total sample size.</p></td>
    </tr>
    <tr>
      <th>missing</th>
      <td><p>missing - the value to be used as missing value
in the C++ routine instead of NA. If NA, a suitable value is calculated internally.
Note that in the returned dataset, all NA-values (if any) will be replaced with
this value.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>Seed.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The rank-swapped data set or a modified <code>sdcMicroObj-class</code> object.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Rank swapping sorts the values of one numeric variable by their numerical
values (ranking).  The restricted range is determined by the rank of two
swapped values, which cannot differ, by definition, by more than \(P\)
percent of the total number of observations.  R0 and K0 are only used if
positive. Only one of the two are used (R0 is prefered if both are
positive).</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Moore, Jr.R. (1996) Controlled data-swapping techniques for
masking public use microdata, U.S. Bureau of the Census <em>Statistical
Research Division Report Series</em>, RR 96-04.</p>
<p>Kowarik, A. and Templ, M. and Meindl, B. and Fonteneau, F. and Prantner, B.:
<em>Testing of IHSN Cpp Code and Inclusion of New Methods into sdcMicro</em>,
in: Lecture Notes in Computer Science, J. Domingo-Ferrer, I. Tinnirello
(editors.); Springer, Berlin, 2012, ISBN: 978-3-642-33626-3, pp. 63-77. 
doi: <a href='http://doi.org/10.1007/978-3-642-33627-0_6'>10.1007/978-3-642-33627-0_6</a></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>testdata2</span>)
<span class='no'>data_swap</span> <span class='kw'>&lt;-</span> <span class='fu'>rankSwap</span>(<span class='no'>testdata2</span>,<span class='kw'>variables</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"age"</span>,<span class='st'>"income"</span>,<span class='st'>"expend"</span>,<span class='st'>"savings"</span>))

<span class='co'>## for objects of class sdcMicro:</span>
<span class='fu'>data</span>(<span class='no'>testdata2</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>createSdcObj</span>(<span class='no'>testdata2</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'urbrur'</span>,<span class='st'>'roof'</span>,<span class='st'>'walls'</span>,<span class='st'>'water'</span>,<span class='st'>'electcon'</span>,<span class='st'>'relat'</span>,<span class='st'>'sex'</span>),
  <span class='kw'>numVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'expend'</span>,<span class='st'>'income'</span>,<span class='st'>'savings'</span>), <span class='kw'>w</span><span class='kw'>=</span><span class='st'>'sampling_weight'</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>rankSwap</span>(<span class='no'>sdc</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Alexander Kowarik for the interface, Bernhard Meindl for improvements.

For the underlying C++ code: This work is being supported by the
International Household Survey Network (IHSN) and funded by a DGF Grant
provided by the World Bank to the PARIS21 Secretariat at the Organisation
for Economic Co-operation and Development (OECD).  This work builds on
previous work which is elsewhere acknowledged.

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Bernhard Meindl, Alexander Kowarik, Matthias Templ.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

