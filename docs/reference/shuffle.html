<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Shuffling and EGADP — shuffle • sdcMicro</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Shuffling and EGADP — shuffle" />

<meta property="og:description" content="Data shuffling and General Additive Data Perturbation." />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">sdcMicro</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sdcMicro.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sdcTools/sdcMicro">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Shuffling and EGADP</h1>
    <small>Source: <a href='https:/github.com/sdcTools/sdcMicro/blob/master/R/shuffle.R'><code>R/shuffle.R</code></a></small>
    </div>

    
    <p>Data shuffling and General Additive Data Perturbation.</p>
    

    <pre class="usage"><span class='fu'>shuffle</span>(<span class='no'>obj</span>, <span class='no'>form</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"ds"</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>covmethod</span> <span class='kw'>=</span> <span class='st'>"spearman"</span>,
  <span class='kw'>regmethod</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>gadp</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj</th>
      <td><p>An object of class sdcMicroObj or a data.frame including the
data.</p></td>
    </tr>
    <tr>
      <th>form</th>
      <td><p>An object of class &#8220;formula&#8221; (or one that can be coerced
to that class): a symbolic description of the model to be fitted.  The
responses have to consists of at least two variables of any class and the
response variables have to be of class numeric.  The response variables
belongs to numeric key variables (quasi-identifiers of numeric scale). The
predictors are can be distributed in any way (numeric, factor, ordered
factor).</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>currently either the original form of data shuffling
(&#8220;ds&#8221; - default), &#8220;mvn&#8221; or &#8220;mlm&#8221;, see the details
section. The last method is in experimental mode and almost untested.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>Survey sampling weights. Automatically chosen when obj is of
class <code>sdcMicroObj-class</code>.</p></td>
    </tr>
    <tr>
      <th>covmethod</th>
      <td><p>Method for covariance estimation. &#8220;spearman&#8221;,
&#8220;pearson&#8221; and \ dQuotemcd are possible. For the latter one, the
implementation in package robustbase is used.</p></td>
    </tr>
    <tr>
      <th>regmethod</th>
      <td><p>Method for multivariate regression. &#8220;lm&#8221; and
&#8220;MM&#8221; are possible.  For method &#8220;MM&#8221;, the function &#8220;rlm&#8221;
from package MASS is applied.</p></td>
    </tr>
    <tr>
      <th>gadp</th>
      <td><p>TRUE, if the egadp results from a fit on the origianl data is
returned.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If &#8216;obj&#8217; is of class <code>sdcMicroObj-class</code> the corresponding
slots are filled, like manipNumVars, risk and utility.  If &#8216;obj&#8217; is
of class &#8220;data.frame&#8221; an object of class &#8220;micro&#8221; with
following entities is returned:</p>
<dt>shConf </dt><dd><p>the shuffled numeric key
variables</p></dd> <dt>egadp </dt><dd><p>the perturbed (using gadp method) numeric key
variables</p></dd>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Perturbed values for the sensitive variables are generated.  The sensitive
variables have to be stored as responses in the argument &#8216;form&#8217;,
which is the usual formula interface for regression models in R.</p>
<p>For method &#8220;ds&#8221; the EGADP method is applied on the norm inverse
percentiles.  Shuffling then ranks the original values according to the GADP
output. For further details, please see the references.</p>
<p>Method &#8220;mvn&#8221; uses a simplification and draws from the normal Copulas
directly before these draws are shuffled.</p>
<p>Method &#8220;mlm&#8221; is also a simplification. A linear model is applied the
expected values are used as the perturbed values before shuffling is
applied.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>In this version, the covariance method chosen is used for any
covariance and correlation estimations in the whole gadp and shuffling
function.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>K. Muralidhar, R. Parsa, R. Saranthy (1999). A general additive
data perturbation method for database security. <em>Management Science</em>,
45, 1399-1415.</p>
<p>K. Muralidhar, R. Sarathy (2006). Data shuffling - a new masking approach
for numerical data. <em>Management Science</em>, 52(5), 658-670, 2006.</p>
<p>M. Templ, B. Meindl. (2008).  Robustification of Microdata Masking Methods
and the Comparison with Existing Methods, in: <em>Lecture Notes on
Computer Science</em>, J. Domingo-Ferrer, Y. Saygin (editors.); Springer,
Berlin/Heidelberg, 2008, ISBN: 978-3-540-87470-6, pp. 14-25.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='rankSwap.html'>rankSwap</a>, lm</code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>Prestige</span>,<span class='kw'>package</span><span class='kw'>=</span><span class='st'>"car"</span>)
<span class='no'>form</span> <span class='kw'>&lt;-</span> <span class='fu'>formula</span>(<span class='no'>income</span> + <span class='no'>education</span> ~ <span class='no'>women</span> + <span class='no'>prestige</span> + <span class='no'>type</span>, <span class='kw'>data</span><span class='kw'>=</span><span class='no'>Prestige</span>)
<span class='no'>sh</span> <span class='kw'>&lt;-</span> <span class='fu'>shuffle</span>(<span class='kw'>obj</span><span class='kw'>=</span><span class='no'>Prestige</span>,<span class='no'>form</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: rows with missing values have been imputed!</span></div><div class='input'><span class='fu'>plot</span>(<span class='no'>Prestige</span>[,<span class='fu'>c</span>(<span class='st'>"income"</span>, <span class='st'>"education"</span>)])</div><div class='img'><img src='shuffle-1.png' alt='' width='700' height='432.632880098887' /></div><div class='input'><span class='fu'>plot</span>(<span class='no'>sh</span>$<span class='no'>sh</span>)</div><div class='img'><img src='shuffle-2.png' alt='' width='700' height='432.632880098887' /></div><div class='input'><span class='fu'>colMeans</span>(<span class='no'>Prestige</span>[,<span class='fu'>c</span>(<span class='st'>"income"</span>, <span class='st'>"education"</span>)])</div><div class='output co'>#&gt;     income  education 
#&gt; 6797.90196   10.73804 </div><div class='input'><span class='fu'>colMeans</span>(<span class='no'>sh</span>$<span class='no'>sh</span>)</div><div class='output co'>#&gt;     income  education 
#&gt; 6797.90196   10.73804 </div><div class='input'><span class='fu'>cor</span>(<span class='no'>Prestige</span>[,<span class='fu'>c</span>(<span class='st'>"income"</span>, <span class='st'>"education"</span>)], <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"spearman"</span>)</div><div class='output co'>#&gt;             income education
#&gt; income    1.000000  0.573999
#&gt; education 0.573999  1.000000</div><div class='input'><span class='fu'>cor</span>(<span class='no'>sh</span>$<span class='no'>sh</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"spearman"</span>)</div><div class='output co'>#&gt;              income education
#&gt; income    1.0000000 0.6280938
#&gt; education 0.6280938 1.0000000</div><div class='input'>
<span class='co'>## for objects of class sdcMicro:</span>
<span class='fu'>data</span>(<span class='no'>testdata2</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>createSdcObj</span>(<span class='no'>testdata2</span>,
  <span class='kw'>keyVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'urbrur'</span>,<span class='st'>'roof'</span>,<span class='st'>'walls'</span>,<span class='st'>'water'</span>,<span class='st'>'electcon'</span>,<span class='st'>'relat'</span>,<span class='st'>'sex'</span>),
  <span class='kw'>numVars</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'expend'</span>,<span class='st'>'income'</span>,<span class='st'>'savings'</span>), <span class='kw'>w</span><span class='kw'>=</span><span class='st'>'sampling_weight'</span>)
<span class='no'>sdc</span> <span class='kw'>&lt;-</span> <span class='fu'>shuffle</span>(<span class='no'>sdc</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'ds'</span>),<span class='kw'>regmethod</span><span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>'lm'</span>), <span class='kw'>covmethod</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>'spearman'</span>),
                <span class='kw'>form</span><span class='kw'>=</span><span class='no'>savings</span>+<span class='no'>expend</span> ~ <span class='no'>urbrur</span>+<span class='no'>walls</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Matthias Templ, Alexander Kowarik, Bernhard Meindl

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Bernhard Meindl, Alexander Kowarik, Matthias Templ.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

